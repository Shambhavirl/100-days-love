<style>
    :root{
      --purple-900: #2b0b3a; /* dark purple base */
      --purple-700: #421049;
      --accent: #a55af0;     /* brighter purple accent */
      --light-bg: #ffffff;
      --light-contrast: #1b0c2a; /* very dark text on light */
      --dark-bg: #030003;   /* near-black */
      --dark-contrast: #f6f3ff; /* light text on dark */
      --pixel-size: 3px;    /* for pixel borders */
      --transition: 220ms cubic-bezier(.2,.9,.3,1);
    }

    body {
      --bg: linear-gradient(180deg, rgba(165,90,240,0.05) 0%, rgba(165,90,240,0.02) 100%), var(--light-bg);
      --panel-bg: rgba(66,16,73,0.06);
      --text: var(--light-contrast);
      --ui-border: rgba(42,10,58,0.7);
      background: var(--bg);
      color: var(--text);
      font-family: 'Special Elite', "Courier New", monospace;
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem;
      transition: background var(--transition), color var(--transition);
      cursor: url('assets/monster_cursor.png'), auto;
    }

    .dark body, body.dark {
      --bg: linear-gradient(180deg, rgba(43,11,58,0.25) 0%, rgba(43,11,58,0.12) 100%), var(--dark-bg);
      --panel-bg: rgba(165,90,240,0.04);
      --text: var(--dark-contrast);
      --ui-border: rgba(165,90,240,0.65);
    }

    .pixel-ui * {
      image-rendering: pixelated;
      -ms-interpolation-mode: nearest-neighbor;
    }

    .card {
      width: min(980px, 96vw);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
      border: calc(var(--pixel-size)) solid var(--ui-border);
      border-radius: 10px;
      padding: 1.25rem;
      box-shadow:
        0 6px 0 0 rgba(42,10,58,0.12),
        0 12px 24px rgba(16,6,22,0.35);
      backdrop-filter: blur(2px) saturate(1.2);
    }

    .top-row {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .title {
      display:flex;
      align-items:center;
      gap:.75rem;
      font-size:1.25rem;
      letter-spacing: .02em;
      color: var(--text);
      text-shadow: 0 1px 0 rgba(255,255,255,0.02);
    }

    .title .dot {
      width:14px;
      height:14px;
      background: var(--accent);
      border-radius:2px;
      box-shadow: 0 0 8px rgba(165,90,240,0.6);
      transform: scale(1);
    }

    .controls {
      display:flex;
      gap:8px;
      align-items:center;
    }

    .ctrl {
      width:18px;
      height:12px;
      border-radius:2px;
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(0,0,0,0.03));
      border: 1px solid rgba(255,255,255,0.06);
      box-shadow: inset -1px -1px 0 rgba(0,0,0,0.06);
    }

    .content {
      display:grid;
      grid-template-columns: 1fr 320px;
      gap: 1rem;
      align-items:start;
    }

    .main {
      padding: 1rem;
      background: var(--panel-bg);
      border: calc(var(--pixel-size)) solid rgba(0,0,0,0.06);
      min-height: 360px;
      border-radius: 6px;
      color: var(--text);
      font-size: 1rem;
      line-height: 1.5;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.02);
    }

    .sidebar {
      padding: 0.75rem;
      background: rgba(0,0,0,0.03);
      border-radius: 6px;
      border: calc(var(--pixel-size)) solid rgba(0,0,0,0.06);
      min-height: 360px;
      overflow:auto;
      font-size: .9rem;
    }

    .typewriter {
      font-family: 'Special Elite', monospace;
      white-space: pre-wrap;
      color: var(--text);
    }

    .contrast {
      color: var(--text);
      text-shadow: 0 1px 0 rgba(0,0,0,0.12);
    }

    .theme-toggle {
      --size: 56px;
      width: calc(var(--size) * 1);
      height: calc(var(--size) / 2);
      position: relative;
      display:inline-block;
      cursor: pointer;
      user-select:none;
    }

    .theme-toggle input { display:none; }

    .toggle-track {
      width:100%;
      height:100%;
      border-radius: 6px;
      border: calc(var(--pixel-size)) solid var(--ui-border);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.02));
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 6px;
      box-sizing: border-box;
      position:relative;
      transition: background 220ms cubic-bezier(.2,.9,.3,1), border-color 220ms cubic-bezier(.2,.9,.3,1);
      overflow: hidden;
    }

    .knob {
      --knob-size: calc(var(--size)/2 - 6px);
      width: var(--knob-size);
      height: var(--knob-size);
      border-radius: 4px;
      background: var(--accent);
      display:flex;
      align-items:center;
      justify-content:center;
      transform: translateX(0);
      transition: transform 300ms cubic-bezier(.2,.9,.3,1), box-shadow 200ms;
      box-shadow: 0 3px 0 rgba(0,0,0,0.2);
      font-size: 14px;
      filter: drop-shadow(0 4px 8px rgba(86,0,150,0.12));
    }

    .knob .heart {
      display:inline-block;
      transform-origin: center;
      animation: beat 1500ms infinite ease-in-out;
      will-change: transform;
      text-shadow: 0 1px 0 rgba(0,0,0,0.2);
    }

    @keyframes beat {
      0%,100% { transform: scale(1); }
      50% { transform: scale(1.08); }
    }

    .sun, .moon {
      width:18px;
      height:18px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      font-size:12px;
      opacity: .85;
    }

    .theme-toggle input:checked + .toggle-track .knob {
      transform: translateX(calc(100% - var(--knob-size)));
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      color: var(--purple-900);
    }

    .pixel-divider {
      height:6px;
      background: repeating-linear-gradient(90deg, rgba(0,0,0,0.06) 0 2px, transparent 2px 4px);
      margin: .75rem 0;
    }

    @media (max-width:880px){
      .content { grid-template-columns: 1fr; }
      .sidebar { order: -1; }
    }

    @media (pointer: fine) {
      body, button, a, input, textarea {
        cursor: url('monster_cursor.png') 16 16, auto;
      }
    }
  </style>
